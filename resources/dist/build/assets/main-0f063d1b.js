function _(s,t,e,n,a,o,c,u){var i=typeof s=="function"?s.options:s;t&&(i.render=t,i.staticRenderFns=e,i._compiled=!0),n&&(i.functional=!0),o&&(i._scopeId="data-v-"+o);var l;if(c?(l=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),a&&a.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(c)},i._ssrRegister=l):a&&(l=u?function(){a.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(i.functional){i._injectStyles=l;var d=i.render;i.render=function(f,h){return l.call(h),d(f,h)}}else{var m=i.beforeCreate;i.beforeCreate=m?[].concat(m,l):[l]}return{exports:s,options:i}}const C={mixins:[Fieldtype],data(){var s,t,e,n,a,o,c,u,i,l,d;return{data:{imageFile:{url:((t=(s=this.value)==null?void 0:s.imageFile)==null?void 0:t.url)||null,id:((n=(e=this.value)==null?void 0:e.imageFile)==null?void 0:n.id)||null,fileName:((o=(a=this.value)==null?void 0:a.imageFile)==null?void 0:o.fileName)||null,alt:((u=(c=this.value)==null?void 0:c.imageFile)==null?void 0:u.alt)||null,error:((l=(i=this.value)==null?void 0:i.imageFile)==null?void 0:l.error)||null},hotspots:((d=this.value)==null?void 0:d.hotspots)||[]}}},mounted(){this.config.max_files=1,this.config.min_files=0,this.config.mode="list"},watch:{data:{deep:!0,handler(){this.update(this.data)}}},computed:{imageFileId(){return this.data.imageFile.id?[this.data.imageFile.id]:[]}},methods:{imageFileClear(){this.data.imageFile={url:null,id:null,fileName:null,error:null}},updateImageFile(s){const t=["jpg","jpeg","png","gif","svg"];s[0]&&this.$axios.post(this.cpUrl("assets-fieldtype"),{assets:[s[0]]}).then(e=>{t.includes(e.data[0].extension)?this.data.imageFile={url:e.data[0].url,id:e.data[0].id,fileName:e.data[0].basename,alt:e.data[0].values.alt}:this.data.imageFile={error:"Invalid file type"}})},addHotspot(){this.data.hotspots.push({x:50,y:50,content:""})},dragStart(s,t){const e=this.data.hotspots[s],n=t.clientX,a=t.clientY,o=e.x,c=e.y,u=l=>{const d=this.$refs.image.getBoundingClientRect(),m=48,r=(d.width-m)/d.width*100,f=(d.height-m)/d.height*100,h=100-r,p=100-f,v=Math.min(r,Math.max(h,o+(l.clientX-n)/d.width*100)),g=Math.min(f,Math.max(p,c+(l.clientY-a)/d.height*100));e.x=v,e.y=g},i=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",i)},cpUrl(s){return s=Statamic.$config.get("cpUrl")+"/"+s,s.replace(/([^:])(\/\/+)/g,"$1/")}}};var F=function(){var t=this,e=t._self._c;return e("div",[t.data.imageFile.url?e("div",[e("div",{staticClass:"i-flex i-my-4 i-justify-between i-items-center i-p-4"},[e("p",{staticClass:"i-text-sm"},[t._v("Selected 3D Model:")]),e("div",{staticClass:"i-flex i-items-center i-gap-2"},[e("p",{staticClass:"i-text-sm"},[t._v(t._s(t.data.imageFile.fileName))]),e("button",{on:{click:t.imageFileClear}},[t._v(" × ")])])])]):e("assets-fieldtype",{ref:"assets",staticClass:"assets-fieldtype",attrs:{value:t.imageFileId,handle:"assets",config:t.config,readOnly:t.readOnly},on:{input:t.updateImageFile}}),t.data.imageFile.error?e("div",{staticClass:"d-text-red-500"},[t._v(t._s(t.data.imageFile.error))]):t._e(),t.data.imageFile.url?e("div",[e("div",{staticClass:"i-relative"},[e("div",{staticClass:"i-absolute i-w-full i-h-full i-border-red-500 i-border-opacity-25 i-border-[48px]"}),e("img",{ref:"image",staticClass:"i-w-full i-h-auto i-select-none",attrs:{src:t.data.imageFile.url}}),t._l(t.data.hotspots,function(n,a){return e("div",{key:a,staticClass:"i-absolute i-cursor-move -i-translate-x-[12px] -i-translate-y-[12px]",style:{top:n.y+"%",left:n.x+"%"},on:{mousedown:function(o){return t.dragStart(a,o)}}},[e("div",{staticClass:"i-w-6 i-h-6 i-bg-blue-500 i-border-white i-border-2 i-rounded-full i-flex i-justify-center i-items-center i-text-xs"},[t._v(t._s(a))])])})],2),e("div",{staticClass:"i-mt-2 i-w-full"},[e("div",{staticClass:"i-grid i-gap-2"},t._l(t.data.hotspots,function(n,a){return e("div",{key:a,staticClass:"flex gap-2 items-center"},[e("div",{staticClass:"i-w-6 i-h-6 i-flex-none i-bg-blue-500 i-border-white i-border-2 i-rounded-full i-flex i-justify-center i-items-center i-text-xs",attrs:{title:"x: {hotspot.y}"}},[t._v(t._s(a))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:n.content,expression:"hotspot.content"}],staticClass:"input-text",attrs:{rows:"2",type:"text"},domProps:{value:n.content},on:{input:function(o){o.target.composing||t.$set(n,"content",o.target.value)}}}),t._v(" "),e("div",[e("button",{on:{click:function(o){return t.data.hotspots.splice(a,1)}}},[t._v(" × ")])])])}),0)]),e("div",{staticClass:"i-mt-2"},[e("button",{staticClass:"btn",on:{click:t.addHotspot}},[t._v("Add Hotspot")])])]):e("div",{staticClass:"i-flex i-justify-between i-items-center"},[e("p",{staticClass:"i-mt-2 i-text-sm"},[t._v("Select an image")])])],1)},y=[],x=_(C,F,y,!1,null,null,null,null);const b=x.exports;Statamic.$components.register("image_hot_spots-fieldtype",b);
